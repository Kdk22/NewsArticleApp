@page
@{
}

<ul onload="getItems" id="all-blogs"> 

</ul>
<script>
    @*const uri = '';
    let articles = [];*@

    function getItems() {
        debugger
        alert("blaa")
        fetch('https://localhost:5001/api/NewsArticle')
            .then(response => response.json())
            .then(data => _displayItems(data))
            .catch(error => console.error('Unable to get items.', error));
    }

    function _displayItems(data) {
        const tBody = document.getElementById('all-blogs');
        tBody.innerHTML = '';

        _displayCount(data.length);

        const button = document.createElement('button');

        data.forEach(item => {
            //let isCompleteCheckbox = document.createElement('input');
            //isCompleteCheckbox.type = 'checkbox';
            //isCompleteCheckbox.disabled = true;
            //isCompleteCheckbox.checked = item.isComplete;

            let editButton = button.cloneNode(false);
            editButton.innerText = 'Edit';
            editButton.setAttribute('onclick', `displayEditForm(${item.id})`);

            let deleteButton = button.cloneNode(false);
            deleteButton.innerText = 'Delete';
            deleteButton.setAttribute('onclick', `deleteItem(${item.id})`);



            const l1 = tBody.createElement("li")
            const textNode1 = document.createTextNode(item.name)
            l1.appendChild(textNode1);
            tBody.appendChild(l1);

            const l2 = tBody.createElement("li")
            const textNode2 = document.createTextNode(item.description)
            l1.appendChild(textNode2);
            tBody.appendChild(l1);

            const l3 = tBody.createElement("li")
            const textNode3 = document.createTextNode(item.datePublished)
            l3.appendChild(textNode3);
            tBody.appendChild(l3);

            const l4 = tBody.createElement("li")
            const textNode4 = document.createTextNode(item.imageURL)
            l4.appendChild(textNode4);
            tBody.appendChild(l4);

            let l5 = tBody.createElement("li")
            l5.appendChild(editButton);

            let td4 = tBody.createElement("li");
            td4.appendChild(deleteButton);
        });

        articles = data;
    }

</script>
